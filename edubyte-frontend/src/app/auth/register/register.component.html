<!-- 
  Contenedor principal con el fondo degradado, igual que el login.
-->
<div class="container-wrapper" style="background-image: linear-gradient(135deg, rgba(127, 19, 236, 0.2) 0%, rgba(127, 19, 236, 0) 40%), linear-gradient(to right, #f7f6f8, #e9e5f0);">
  
  <!-- Tarjeta principal -->
  <div class="content-card-wrapper">
    
    <!-- Encabezado con logo y título -->
    <div class="header">
      <div class="logo-container">
        <!-- SVG del Logo de EduByte -->
        <svg fill="currentColor" height="32" viewBox="0 0 24 24" width="32" xmlns="http://www.w3.org/2000/svg">
          <path d="M12 2L2 7V17L12 22L22 17V7L12 2ZM11 15.5V9.5L5 6.5L11 3.5V9.5L13 10.5V14.5L11 15.5ZM13 10.5L19 7.5L13 4.5V10.5Z"></path>
        </svg>
        <h1 class="title">Crea tu cuenta</h1>
      </div>
      <p class="subtitle">
        Comienza tu viaje de aprendizaje hoy mismo.
      </p>
    </div>

    <!-- Contenedor del formulario (tarjeta traslúcida) -->
    <div class="form-card">
      <div class="form-card-body">
        
        <!-- Formulario de Angular -->
        <form class="form-body" [formGroup]="registerForm" (ngSubmit)="onSubmit()" novalidate>
      
          <!-- Fila de Nombre y Apellido -->
          <div class="grid-row">
            <!-- Campo Nombre -->
            <div class="form-group">
              <label for="first-name" class="form-label">Nombre</label>
              <div class="input-group">
                <div class="input-icon">
                  <span class="material-symbols-outlined">person</span>
                </div>
                <input type="text" id="first-name" class="form-input" placeholder="Ingresa tu nombre"
                       formControlName="firstName"
                       [class.is-invalid]="submitted && f['firstName'].errors" />
              </div>
              <div *ngIf="submitted && f['firstName'].errors" class="validation-feedback">
                <div *ngIf="f['firstName'].errors['required']">El nombre es requerido.</div>
              </div>
            </div>
            
            <!-- Campo Apellido -->
            <div class="form-group">
              <label for="last-name" class="form-label">Apellido</label>
              <div class="input-group">
                <div class="input-icon">
                  <span class="material-symbols-outlined">badge</span>
                </div>
                <input type="text" id="last-name" class="form-input" placeholder="Ingresa tu apellido"
                       formControlName="lastName"
                       [class.is-invalid]="submitted && f['lastName'].errors" />
              </div>
              <div *ngIf="submitted && f['lastName'].errors" class="validation-feedback">
                <div *ngIf="f['lastName'].errors['required']">El apellido es requerido.</div>
              </div>
            </div>
          </div>
    
          <!-- Campo Email -->
          <div class="form-group">
            <label for="email-address" class="form-label">Correo electrónico</label>
            <div class="input-group">
              <div class="input-icon">
                <span class="material-symbols-outlined">mail</span>
              </div>
              <input type="email" id="email-address" class="form-input" placeholder="tu@email.com"
                     formControlName="email"
                     [class.is-invalid]="submitted && f['email'].errors" />
            </div>
            <div *ngIf="submitted && f['email'].errors" class="validation-feedback">
              <div *ngIf="f['email'].errors['required']">El correo es requerido.</div>
              <div *ngIf="f['email'].errors['email']">Debe ser un correo válido.</div>
            </div>
          </div>
    
          <!-- Campo Contraseña -->
          <div class="form-group">
            <label for="password" class="form-label">Contraseña</label>
            <div class="input-group">
              <div class="input-icon">
                <span class="material-symbols-outlined">lock</span>
              </div>
              <input type="password" id="password" 
                     class="form-input"
                     [ngClass]="passwordStrengthClass"
                     placeholder="Crea una contraseña segura"
                     formControlName="password"
                     [class.is-invalid]="submitted && f['password'].errors" />
            </div>
            <!-- Indicador de Fortaleza -->
            <div class="password-strength-indicator">
              <div></div>
              <div></div>
              <div></div>
            </div>
            <div *ngIf="submitted && f['password'].errors" class="validation-feedback">
              <div *ngIf="f['password'].errors['required']">La contraseña es requerida.</div>
              <div *ngIf="f['password'].errors['minlength']">Debe tener al menos 8 caracteres.</div>
            </div>
          </div>
    
          <!-- Campo Confirmar Contraseña -->
          <div class="form-group">
            <label for="confirm-password" class="form-label">Confirmar Contraseña</label>
            <div class="input-group">
              <div class="input-icon">
                <span class="material-symbols-outlined">password</span>
              </div>
              <input type="password" id="confirm-password" class="form-input" placeholder="Confirma tu contraseña"
                     formControlName="confirmPassword"
                     [class.is-invalid]="submitted && f['confirmPassword'].errors" />
            </div>
            <div *ngIf="submitted && f['confirmPassword'].errors" class="validation-feedback">
              <div *ngIf="f['confirmPassword'].errors['required']">Debes confirmar la contraseña.</div>
              <div *ngIf="f['confirmPassword'].errors['mismatch']">Las contraseñas no coinciden.</div>
            </div>
          </div>
    
          <!-- Campo Rol -->
          <div class="form-group">
            <label for="role" class="form-label">Rol</label>
             <div class="input-group">
                <div class="input-icon">
                  <span class="material-symbols-outlined">school</span>
                </div>
                <select id="role" class="form-select" formControlName="role">
                  <option>Estudiante</option>
                  <option>Instructor</option>
                </select>
             </div>
          </div>
    
          <!-- Campo Términos y Condiciones -->
          <div class="form-options">
            <div class="remember-me">
              <input id="terms-and-conditions" type="checkbox" class="form-checkbox" 
                     formControlName="terms"
                     [class.is-invalid]="submitted && f['terms'].errors" />
              <label for="terms-and-conditions" class="form-label-checkbox">
                Acepto los <a href="#">términos y condiciones</a>
              </label>
            </div>
            <div *ngIf="submitted && f['terms'].errors" class="validation-feedback">
              <div *ngIf="f['terms'].errors['required']">Debes aceptar los términos.</div>
            </div>
          </div>
    
          <!-- Mensaje de error general de la API -->
          <div *ngIf="errorMessage" class="alert-danger">
            {{ errorMessage }}
          </div>
    
          <!-- Botones -->
          <div class="button-group">
            <button type="submit" class="submit-button">
              Crear Cuenta
            </button>
            <button type="button" class="google-button" (click)="registerWithGoogle()">
              <!-- SVG de Google -->
              <svg class="google-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M22.56,12.25C22.56,11.45 22.49,10.68 22.36,9.92H12.27V14.4H18.1C17.84,15.93 17,17.25 15.75,18.1V20.76H19.34C21.45,18.83 22.56,15.83 22.56,12.25Z"></path>
                <path d="M12.27,23C15.11,23 17.5,22.14 19.34,20.76L15.75,18.1C14.8,18.72 13.63,19.09 12.27,19.09C9.56,19.09 7.22,17.25 6.39,14.81H2.69V17.5C4.5,20.72 8.12,23 12.27,23Z"></path>
                <path d="M6.39,14.81C6.18,14.22 6.06,13.59 6.06,12.94C6.06,12.29 6.18,11.66 6.39,11.07V8.38H2.69C1.94,9.85 1.5,11.35 1.5,12.94C1.5,14.53 1.94,16.03 2.69,17.5L6.39,14.81Z"></path>
                <path d="M12.27,6.81C13.73,6.81 14.95,7.31 15.93,8.22L19.42,4.72C17.5,3 15.11,2 12.27,2C8.12,2 4.5,4.28 2.69,7.5L6.39,10.19C7.22,7.75 9.56,6.81 12.27,6.81Z"></path>
              </svg>
              Registrarse con Google
            </button>
          </div>
        </form>
    
        <!-- Enlace inferior para Iniciar Sesión -->
        <div class="footer-link">
          <p>
            ¿Ya tienes cuenta?
            <a [routerLink]="['/login']">
              Inicia sesión
            </a>
          </p>
        </div>
      </div>
    </div>

  </div>
</div>

