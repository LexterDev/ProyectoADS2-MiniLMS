
<div class="flex min-h-screen items-center justify-center bg-cover bg-center p-4 sm:p-6 bg-gradient-to-r from-background-light to-[#e9e5f0] dark:bg-background-dark" style="background-image: linear-gradient(135deg, rgba(127, 19, 236, 0.2) 0%, rgba(127, 19, 236, 0) 40%);">

  <!-- Tarjeta principal (más ancha para el registro) -->
  <div class="w-full max-w-2xl">
    
    <!-- Encabezado con logo y título -->
    <div class="mx-auto flex flex-col items-center gap-4">
      <div class="flex items-center gap-2 text-primary">
        <!-- SVG del Logo de EduByte -->
        <svg fill="currentColor" height="32" viewBox="0 0 24 24" width="32" xmlns="http://www.w3.org/2000/svg">
          <path d="M12 2L2 7V17L12 22L22 17V7L12 2ZM11 15.5V9.5L5 6.5L11 3.5V9.5L13 10.5V14.5L11 15.5ZM13 10.5L19 7.5L13 4.5V10.5Z"></path>
        </svg>
        <h1 class="text-3xl font-bold text-gray-900 dark:text-white">Crea tu cuenta</h1>
      </div>
      <p class="text-center text-gray-600 dark:text-gray-300">
        Comienza tu viaje de aprendizaje hoy mismo.
      </p>
    </div>

    <!-- Contenedor del formulario (tarjeta traslúcida) -->
    <div class="mt-8 rounded-xl bg-white/50 dark:bg-background-dark/50 backdrop-blur-sm shadow-2xl shadow-primary/10">
      <div class="p-8">
        <!-- 
          Formulario de Angular 
          ¡Conectado a la lógica de tu compañero!
        -->
        <form [formGroup]="registerForm" (ngSubmit)="onSubmit()" novalidate class="space-y-6">
          
          <!-- Fila de Nombre y Apellido -->
          <div class="grid grid-cols-1 gap-6 md:grid-cols-2">
            
            <!-- Campo Nombre -->
            <div>
              <label for="first-name" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Nombre</label>
              <div class="relative mt-1">
                <div class="pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3">
                  <span class="material-symbols-outlined text-gray-400">person</span>
                </div>
                <input type="text" id="first-name" placeholder="Ingresa tu nombre"
                       formControlName="firstName"
                       class="block w-full rounded-xl border-transparent bg-background-light/70 dark:bg-background-dark/70 py-3 pl-10 pr-3 text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary"
                       [ngClass]="{ 'border-red-500 focus:border-red-500 focus:ring-red-500': submitted && f['firstName'].errors }" />
              </div>
              <div *ngIf="submitted && f['firstName'].errors" class="mt-2 text-sm text-red-600">
                <div *ngIf="f['firstName'].errors['required']">El nombre es requerido.</div>
              </div>
            </div>
            
            <!-- Campo Apellido -->
            <div>
             
              <label for="last-name" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Apellido</label>
              <div class="relative mt-1">
                <div class="pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3">
                  <span class="material-symbols-outlined text-gray-400">badge</span>
                </div>
                <input type="text" id="last-name" placeholder="Ingresa tu apellido"
                       formControlName="lastName"
                       class="block w-full rounded-xl border-transparent bg-background-light/70 dark:bg-background-dark/70 py-3 pl-10 pr-3 text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary"
                       [ngClass]="{ 'border-red-500 focus:border-red-500 focus:ring-red-500': submitted && f['lastName'].errors }" />
              </div>
              <div *ngIf="submitted && f['lastName'].errors" class="mt-2 text-sm text-red-600">
                <div *ngIf="f['lastName'].errors['required']">El apellido es requerido.</div>
              </div>
            </div>
          </div>
    
          <!-- Campo Email -->
          <div>
            <label for="email-address" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Correo electrónico</label>
            <div class="relative mt-1">
              <div class="pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3">
                <span class="material-symbols-outlined text-gray-400">mail</span>
              </div>
              <input type="email" id="email-address" placeholder="tu@email.com"
                     formControlName="email"
                     class="block w-full rounded-xl border-transparent bg-background-light/70 dark:bg-background-dark/70 py-3 pl-10 pr-3 text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary"
                     [ngClass]="{ 'border-red-500 focus:border-red-500 focus:ring-red-500': submitted && f['email'].errors }" />
            </div>
            <div *ngIf="submitted && f['email'].errors" class="mt-2 text-sm text-red-600">
              <div *ngIf="f['email'].errors['required']">El correo es requerido.</div>
              <div *ngIf="f['email'].errors['email']">Debe ser un correo válido.</div>
            </div>
          </div>
    
          <!-- Campo Contraseña -->
          <div>
            <label for="password" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Contraseña</label>
            <div class="relative mt-1">
              <div class="pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3">
                <span class="material-symbols-outlined text-gray-400">lock</span>
              </div>
              <input type="password" id="password" 
                     placeholder="Crea una contraseña segura"
                     formControlName="password"
                     class="block w-full rounded-xl border-transparent bg-background-light/70 dark:bg-background-dark/70 py-3 pl-10 pr-3 text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary"
                     [ngClass]="{ 'border-red-500 focus:border-red-500 focus:ring-red-500': submitted && f['password'].errors }" />
            </div>
            <!-- Indicador de Fortaleza  -->
            <div class="grid grid-cols-3 gap-1 w-full h-1 mt-2 rounded-full overflow-hidden">
              <div class="h-full rounded-full transition-colors" 
                   [ngClass]="passwordStrengthClass === 'password-strength-weak' ? 'bg-red-500' : 
                              passwordStrengthClass === 'password-strength-medium' ? 'bg-yellow-500' : 
                              passwordStrengthClass === 'password-strength-strong' ? 'bg-green-500' : 
                              'bg-slate-200 dark:bg-slate-700'"></div>
              <div class="h-full rounded-full transition-colors" 
                   [ngClass]="passwordStrengthClass === 'password-strength-medium' ? 'bg-yellow-500' : 
                              passwordStrengthClass === 'password-strength-strong' ? 'bg-green-500' : 
                              'bg-slate-200 dark:bg-slate-700'"></div>
              <div class="h-full rounded-full transition-colors" 
                   [ngClass]="passwordStrengthClass === 'password-strength-strong' ? 'bg-green-500' : 
                              'bg-slate-200 dark:bg-slate-700'"></div>
            </div>
            <div *ngIf="submitted && f['password'].errors" class="mt-2 text-sm text-red-600">
              <div *ngIf="f['password'].errors['required']">La contraseña es requerida.</div>
              <div *ngIf="f['password'].errors['minlength']">Debe tener al menos 8 caracteres.</div>
            </div>
          </div>
    
          <!-- Campo Confirmar Contraseña -->
          <div>
            <label for="confirm-password" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Confirmar Contraseña</label>
            <div class="relative mt-1">
              <div class="pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3">
                <span class="material-symbols-outlined text-gray-400">password</span>
              </div>
              <input type="password" id="confirm-password" placeholder="Confirma tu contraseña"
                     formControlName="confirmPassword"
                     class="block w-full rounded-xl border-transparent bg-background-light/70 dark:bg-background-dark/70 py-3 pl-10 pr-3 text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary"
                     [ngClass]="{ 'border-red-500 focus:border-red-500 focus:ring-red-500': submitted && f['confirmPassword'].errors }" />
            </div>
            <div *ngIf="submitted && f['confirmPassword'].errors" class="mt-2 text-sm text-red-600">
              <div *ngIf="f['confirmPassword'].errors['required']">Debes confirmar la contraseña.</div>
              <div *ngIf="f['confirmPassword'].errors['mismatch']">Las contraseñas no coinciden.</div>
            </div>
          </div>
    
          <!-- Campo Rol -->
          <div>
            <label for="role" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Rol</label>
             <div class="relative mt-1">
                <div class="pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3">
                  <span class="material-symbols-outlined text-gray-400">school</span>
                </div>
                <select id="role" formControlName="role" class="block w-full appearance-none rounded-xl border-transparent bg-background-light/70 dark:bg-background-dark/70 py-3 pl-10 pr-10 text-gray-900 dark:text-white focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary">
                  <option>Estudiante</option>
                  <option>Instructor</option>
                </select>
                <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-400">
                   <span class="material-symbols-outlined">expand_more</span>
                </div>
             </div>
          </div>
    
          <!-- Campo Términos y Condiciones -->
          <div>
            <div class="flex items-start">
              <div class="flex h-6 items-center">
                <input id="terms-and-conditions" type="checkbox" 
                       formControlName="terms"
                       class="h-4 w-4 rounded-md border-gray-300 dark:border-gray-600 bg-background-light dark:bg-background-dark text-primary focus:ring-primary"
                       [ngClass]="{ 'border-red-500': submitted && f['terms'].errors }" />
              </div>
              <div class="ml-3 text-sm">
                <label for="terms-and-conditions" class="text-gray-700 dark:text-gray-300">
                  Acepto los <a href="#" class="font-medium text-primary hover:underline">términos y condiciones</a>
                </label>
              </div>
            </div>
             <div *ngIf="submitted && f['terms'].errors" class="mt-2 text-sm text-red-600">
              <div *ngIf="f['terms'].errors['requiredTrue']">Debes aceptar los términos.</div>
            </div>
          </div>
    
          <!-- Mensaje de error general de la API -->
          <div *ngIf="errorMessage" class="rounded-xl border border-red-400 bg-red-50 p-4">
            <p class="text-sm font-medium text-red-800">{{ errorMessage }}</p>
          </div>
    
          <!-- Botones -->
          <div class="space-y-4">
            <button type="submit" class="flex w-full justify-center rounded-xl bg-primary px-4 py-3 text-sm font-semibold text-white shadow-sm transition-all hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2">
              Crear Cuenta
            </button>
            <button type="button" (click)="registerWithGoogle()" class="flex w-full items-center justify-center rounded-xl border border-gray-300 dark:border-gray-600 bg-background-light/70 dark:bg-background-dark/70 px-4 py-3 text-sm font-medium text-gray-700 dark:text-gray-200 shadow-sm transition-all hover:bg-primary/10 dark:hover:bg-primary/20 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2">
              <!-- SVG de Google -->
              <svg class="mr-3 h-5 w-5" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M22.56,12.25C22.56,11.45 22.49,10.68 22.36,9.92H12.27V14.4H18.1C17.84,15.93 17,17.25 15.75,18.1V20.76H19.34C21.45,18.83 22.56,15.83 22.56,12.25Z" fill="#4285F4"></path>
                <path d="M12.27,23C15.11,23 17.5,22.14 19.34,20.76L15.75,18.1C14.8,18.72 13.63,19.09 12.27,19.09C9.56,19.09 7.22,17.25 6.39,14.81H2.69V17.5C4.5,20.72 8.12,23 12.27,23Z" fill="#34A853"></path>
                <path d="M6.39,14.81C6.18,14.22 6.06,13.59 6.06,12.94C6.06,12.29 6.18,11.66 6.39,11.07V8.38H2.69C1.94,9.85 1.5,11.35 1.5,12.94C1.5,14.53 1.94,16.03 2.69,17.5L6.39,14.81Z" fill="#FBBC05"></path>
                <path d="M12.27,6.81C13.73,6.81 14.95,7.31 15.93,8.22L19.42,4.72C17.5,3 15.11,2 12.27,2C8.12,2 4.5,4.28 2.69,7.5L6.39,10.19C7.22,7.75 9.56,6.81 12.27,6.81Z" fill="#EA4335"></path>
              </svg>
              Registrarse con Google
            </button>
          </div>
        </form>
    
        <!-- Enlace inferior para Iniciar Sesión -->
        <div class="mt-8 text-center text-sm text-gray-500 dark:text-gray-400">
          <p>
            ¿Ya tienes cuenta?
            <a [routerLink]="['/login']" class="font-medium text-primary hover:underline">
              Inicia sesión
            </a>
          </p>
        </div>
      </div>
    </div>

  </div>
</div>

