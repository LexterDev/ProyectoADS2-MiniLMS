<!-- 
  Contenedor principal con el fondo degradado. 
  El estilo en línea es necesario para el 'background-image'
-->
<div class="container-wrapper" style="">
  
  <!-- Tarjeta principal -->
  <div class="content-card-wrapper">
    
    <!-- Encabezado con logo y título -->
    <div class="header">
      <div class="logo-container">
        <!-- SVG del Logo de EduByte -->
        <svg fill="currentColor" height="32" viewBox="0 0 24 24" width="32" xmlns="http://www.w3.org/2000/svg">
          <path d="M12 2L2 7V17L12 22L22 17V7L12 2ZM11 15.5V9.5L5 6.5L11 3.5V9.5L13 10.5V14.5L11 15.5ZM13 10.5L19 7.5L13 4.5V10.5Z"></path>
        </svg>
        <h1 class="title">EduByte</h1>
      </div>
      <p class="subtitle">
        Bienvenido de nuevo. Inicia sesión para continuar aprendiendo.
      </p>
    </div>

    <!-- Contenedor del formulario (tarjeta traslúcida) -->
    <div class="form-card">
      <div class="form-card-body">
        <!-- Formulario de Angular -->
        <form [formGroup]="loginForm" (ngSubmit)="onSubmit()" novalidate>
          
          <!-- Campo Email -->
          <div class="form-group">
            <label for="email" class="form-label">Correo electrónico</label>
            <div class="input-group">
              <div class="input-icon">
                <span class="material-symbols-outlined">mail</span>
              </div>
              <input 
                type="email" 
                id="email" 
                class="form-input" 
                placeholder="ejemplo@correo.com"
                formControlName="email"
                [class.is-invalid]="submitted && f['email'].errors"
              />
            </div>
            <!-- Mensajes de Validación Email -->
            <div *ngIf="submitted && f['email'].errors" class="validation-feedback">
              <div *ngIf="f['email'].errors['required']">El correo es requerido.</div>
              <div *ngIf="f['email'].errors['email']">Debe ser un correo válido.</div>
            </div>
          </div>

          <!-- Campo Contraseña -->
          <div class="form-group">
            <label for="password" class="form-label">Contraseña</label>
            <div class="input-group">
              <div class="input-icon">
                <span class="material-symbols-outlined">lock</span>
              </div>
              <input 
                [type]="passwordFieldType" 
                id="password" 
                class="form-input password" 
                placeholder="Ingresa tu contraseña"
                formControlName="password"
                [class.is-invalid]="submitted && f['password'].errors"
              />
              <!-- Botón para mostrar/ocultar contraseña -->
              <button type="button" class="password-toggle" (click)="togglePasswordVisibility()">
                <span class="material-symbols-outlined">{{ passwordIcon }}</span>
              </button>
            </div>
            <!-- Mensajes de Validación Contraseña -->
            <div *ngIf="submitted && f['password'].errors" class="validation-feedback">
              <div *ngIf="f['password'].errors['required']">La contraseña es requerida.</div>
            </div>
          </div>

          <!-- Opciones (Recordarme y Olvidé Contraseña) -->
          <div class="form-options">
            <div class="remember-me">
              <input id="remember-me" type="checkbox" class="form-checkbox" formControlName="rememberMe" />
              <label for="remember-me" class="form-label-checkbox">Recordarme</label>
            </div>
            <div class="forgot-link">
              <!-- Enlace de Angular -->
              <a [routerLink]="['/forgot-password']">¿Olvidaste tu contraseña?</a>
            </div>
          </div>

          <!-- Mensaje de error general de la API -->
          <div *ngIf="errorMessage" class="alert-danger">
            {{ errorMessage }}
          </div>

          <!-- Botón de Iniciar Sesión -->
          <div class="button-group">
            <button type="submit" class="submit-button">
              Iniciar Sesión
            </button>
          </div>
        </form>
        
      </div>
    </div>

    <!-- Enlace inferior para Registrarse -->
    <p class="footer-link">
      ¿No tienes una cuenta?
      <!-- Enlace de Angular -->
      <a [routerLink]="['/register']">Regístrate</a>
    </p>

  </div>
</div>
